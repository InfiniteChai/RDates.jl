<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Primitives · RDates.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RDates.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Primitives</a><ul class="internal"><li><a class="tocitem" href="#Months"><span>Months</span></a></li><li><a class="tocitem" href="#Years"><span>Years</span></a></li></ul></li><li><a class="tocitem" href="../months_and_years/">Months and Years</a></li><li><a class="tocitem" href="../combinations/">Combinations</a></li><li><a class="tocitem" href="../business_days/">Business Days</a></li><li><a class="tocitem" href="../ranges/">Ranges</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Primitives</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Primitives</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/InfiniteChai/RDates.jl/blob/master/docs/src/primitives.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Primitives"><a class="docs-heading-anchor" href="#Primitives">Primitives</a><a id="Primitives-1"></a><a class="docs-heading-anchor-permalink" href="#Primitives" title="Permalink"></a></h1><p>RDates is designed to allow complex date operations to be completed using basic primitive types. Each of these primitive types and operations are explained in more detail in subsequent sections.</p><p>We now go through each of the primitive types, from which we can combine together using compounding operations. Also take note of the examples and the associated short-hand that we can use to define them with the <code>rd&quot;&quot;</code> macro.</p><article class="docstring"><header><a class="docstring-binding" id="RDates.Day" href="#RDates.Day"><code>RDates.Day</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Day(days::Int64)</code></pre><p>Provides us with the ability to add or subtract days from a date. This is equivalent to the <code>Dates.Day</code> struct.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.Day(3) + Date(2019,1,1)
2019-01-04
julia&gt; rd&quot;3d&quot; + Date(2019,1,1)
2019-01-04
julia&gt; RDates.Day(-2) + Date(2019,1,1)
2018-12-30</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L129-L144">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.Week" href="#RDates.Week"><code>RDates.Week</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Week(weeks::Int64)</code></pre><p>Provides us with the ability to add or subtract weeks from a date. This is equivalent to the <code>Dates.Week</code> struct.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.Week(3) + Date(2019,1,1)
2019-01-22
julia&gt; rd&quot;3w&quot; + Date(2019,1,1)
2019-01-22
julia&gt; RDates.Week(-2) + Date(2019,1,1)
2018-12-18</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L157-L172">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.FDOM" href="#RDates.FDOM"><code>RDates.FDOM</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">FDOM()
FDOM(calendars)</code></pre><p>Calculate the first day of the month. Optionally can also take calendar names to determine the first business day of the month.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.FDOM() + Date(2019,1,13)
2019-01-01
julia&gt; rd&quot;FDOM&quot; + Date(2019,1,13)
2019-01-01
julia&gt; cals = RDates.SimpleCalendarManager(Dict(&quot;WEEKEND&quot; =&gt; RDates.WeekendCalendar()))
julia&gt; apply(RDates.FDOM(&quot;WEEKEND&quot;), Date(2017,1,13), cals)
2017-01-02
julia&gt; apply(rd&quot;FDOM@WEEKEND&quot;, Date(2017,1,13), cals)
2017-01-02</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L10-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.LDOM" href="#RDates.LDOM"><code>RDates.LDOM</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">LDOM()
LDOM(calendars)</code></pre><p>Calculate the last day of the month. Optionally can also take calendar names to determine the last business day of the month.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.LDOM() + Date(2019,1,13)
2019-01-31
julia&gt; rd&quot;LDOM&quot; + Date(2019,1,13)
2019-01-31
julia&gt; cals = RDates.SimpleCalendarManager(Dict(&quot;WEEKEND&quot; =&gt; RDates.WeekendCalendar()))
julia&gt; apply(RDates.LDOM(&quot;WEEKEND&quot;), Date(2021,1,13), cals)
2021-01-29
julia&gt; apply(rd&quot;LDOM@WEEKEND&quot;, Date(2021,1,13), cals)
2021-01-29</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L44-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.Easter" href="#RDates.Easter"><code>RDates.Easter</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Easter(yearδ::Int64)</code></pre><p>A date that is well known from hunting eggs and pictures of bunnies, it&#39;s a rather tricky calculation to perform. We provide a simple method to allow you to get the Easter for the given year (plus some delta).</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>0E</code> will get the Easter of the current year, so it could be before or after the date you&#39;ve provided.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.Easter(0) + Date(2019,1,1)
2019-04-21
julia&gt; rd&quot;0E&quot; + Date(2019,1,1)
2019-04-21
julia&gt; RDates.Easter(0) + Date(2019,8,1)
2019-04-21
julia&gt; RDates.Easter(10) + Date(2019,8,1)
2029-04-01</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L78-L100">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.DayMonth" href="#RDates.DayMonth"><code>RDates.DayMonth</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">DayMonth(day::Int64, month::Int64)
DayMonth(day::Int64, month::Symbol)</code></pre><p>Provides us with the ability to move to a specific day and month in the provided year.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>1MAR</code> will get the 1st of March of the current year, so it could be before or after the date you&#39;ve provided.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.DayMonth(23, 10) + Date(2019,1,1)
2019-10-23
julia&gt; RDates.DayMonth(23, :OCT) + Date(2019,1,1)
2019-10-23
julia&gt; rd&quot;23OCT&quot; + Date(2019,1,1)
2019-10-23</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L300-L319">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.Date" href="#RDates.Date"><code>RDates.Date</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Date(date::Dates.Date)
Date(year::Int64, month::Int64, day::Int64)</code></pre><p>Provides us with the ability to move to a specific date, irrespective of the date passed in. This is primarily used when you want to provide a pivot point for ranges which doesn&#39;t relate to the start or end.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.Date(Dates.Date(2017,10,23)) + Date(2019,1,1)
2017-10-23
julia&gt; RDates.Date(2017,10,23) + Date(2019,1,1)
2017-10-23
julia&gt; rd&quot;23OCT2017&quot; + Date(2019,1,1)
2017-10-23</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L336-L353">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.NthWeekdays" href="#RDates.NthWeekdays"><code>RDates.NthWeekdays</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NthWeekdays(dayofweek::Int64, period::Int64)
NthWeekdays(dayofweek::Symbol, period::Int64)</code></pre><p>Move to the nth weekday in the given month and year. This is commonly used for holiday calendars, such as <a href="https://en.wikipedia.org/wiki/Thanksgiving">Thanksgiving</a> which in the U.S. falls on the 4th Thursday in November.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>It&#39;s possible that a given period (such as the 5th weekday) may exist for only a subsection of dates. While it&#39;s a valid RDate it may not produce valid results when applied (and will throw an exception)</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.NthWeekdays(:MON, 2) + Date(2019,1,1)
2019-01-14
julia&gt; RDates.NthWeekdays(1, 2) + Date(2019,1,1)
2019-01-14
julia&gt; rd&quot;2nd MON&quot; + Date(2019,1,1)
2019-01-14
julia&gt; RDates.NthWeekdays(:MON, 5) + Date(2019,1,1)
ERROR: ArgumentError: Day: 35 out of range (1:31)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L368-L392">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.NthLastWeekdays" href="#RDates.NthLastWeekdays"><code>RDates.NthLastWeekdays</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NthLastWeekdays(dayofweek::Int64, period::Int64)
NthLastWeekdays(dayofweek::Symbol, period::Int64)</code></pre><p>Move to the nth last weekday in the given month and year. This is commonly used for holiday calendars, such as the Spring Bank Holiday in the UK, which is the last Monday in May.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>It&#39;s possible that a given period (such as the 5th Last weekday) may exist for only a subsection of dates. While it&#39;s a valid RDate it may not produce valid results when applied (and will throw an exception)</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.NthLastWeekdays(:MON, 2) + Date(2019,1,1)
2019-01-21
julia&gt; RDates.NthLastWeekdays(1, 2) + Date(2019,1,1)
2019-01-21
julia&gt; rd&quot;2nd Last MON&quot; + Date(2019,1,1)
2019-01-21
julia&gt; RDates.NthLastWeekdays(:MON, 5) + Date(2019,1,1)
ERROR: ArgumentError: Day: 0 out of range (1:31)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L416-L439">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RDates.Weekdays" href="#RDates.Weekdays"><code>RDates.Weekdays</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Weekdays(dayofweek::Int64, count::Int64, inclusive::Bool = false)
Weekdays(dayofweek::Symbol, count::Int64, inclusive::Bool = false)</code></pre><p>Provides a mechanism to ask for the next Saturday or the last Tuesday. The count specifies what we&#39;re looking for. <code>Weekdays(:MON, 1)</code> will ask for the next Monday, exclusive of the date started from. You can make it inclusive by passing the inclusive parameter with <code>Weekdays(:MON, 1, true)</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>A count of <code>0</code> is not supported as it doesn&#39;t specify what you&#39;re actually looking for!</p></div></div><p>Incrementing the count will then be additional weeks (forward or backwards) from the single count point.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; RDates.Weekdays(:WED, 1) + Date(2019,9,24) # Tuesday
2019-09-25
julia&gt; RDates.Weekdays(3, 1) + Date(2019,9,24)
2019-09-25
julia&gt; rd&quot;1WED&quot; + Date(2019,9,24)
2019-09-25
julia&gt; RDates.Weekdays(:WED, 1) + Date(2019,9,25)
2019-10-02
julia&gt; RDates.Weekdays(:WED, 1, true) + Date(2019,9,25)
2019-09-25
julia&gt; rd&quot;1WED!&quot; + Date(2019,9,25)
2019-09-25
julia&gt; RDates.Weekdays(:WED, -1) + Date(2019,9,24)
2019-09-18</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/InfiniteChai/RDates.jl/blob/cf7c497e0b9bee6309e2fdbbd6aeb010591786a2/src/primitives.jl#L466-L498">source</a></section></article><h2 id="Months"><a class="docs-heading-anchor" href="#Months">Months</a><a id="Months-1"></a><a class="docs-heading-anchor-permalink" href="#Months" title="Permalink"></a></h2><p>Adding months to a date is a surprisingly complex operation. For example</p><ul><li>What should happen if I add one month to the 31st January?</li><li>Should adding one month to the 30th April maintain the end of month?</li></ul><p>To allow us to have this level of flexibility, we need to introduce two new conventions</p><h4 id="Invalid-Day-Convention"><a class="docs-heading-anchor" href="#Invalid-Day-Convention">Invalid Day Convention</a><a id="Invalid-Day-Convention-1"></a><a class="docs-heading-anchor-permalink" href="#Invalid-Day-Convention" title="Permalink"></a></h4><p>We define conventions to determine what to do if adding (or subtracting) the months leads us to an invalid day.</p><ul><li><strong>Last Day Of Month</strong> or <strong>LDOM</strong> means that you should fall back to the last day of the current month.</li><li><strong>First Day Of Next Month</strong> or <strong>FDONM</strong> means that you should move forward to the first day of the next month.</li><li><strong>Nth Day Of Next Month</strong> or <strong>NDONM</strong> means that you should move forward into the next month the number of days past you have ended up past the last day of month. This is will only differ to <em>FDONM</em> if you fall in February.</li></ul><h4 id="Month-Increment-Convention"><a class="docs-heading-anchor" href="#Month-Increment-Convention">Month Increment Convention</a><a id="Month-Increment-Convention-1"></a><a class="docs-heading-anchor-permalink" href="#Month-Increment-Convention" title="Permalink"></a></h4><p>We also need to understand what to do when you add a month. Most of the time you&#39;ll be just looking to maintain the same day, but it can also sometimes be preferable to maintain the last day of the month.</p><ul><li><strong>Preserve Day Of Month</strong> or <strong>PDOM</strong> means that we&#39;ll always make sure we land on the same day (though invalid day conventions may kick in).</li><li><strong>Preserve Day Of Month And End Of Month</strong> or <strong>PDOMEOM</strong> means that we&#39;ll preserve the day of the month, unless the base date falls on the end of the month, then we&#39;ll keep to the end of the month going forward (noting that this will be applied prior to invalid day conventions). This can also be provided a set of calendars, to allow it to work as the last business day of the month.</li></ul><p>We can now combine these together to start working with month adjustments. These arguments are passed in square brackets, semi colon separated, after the <code>m</code> using their shortened naming conventions.</p><pre><code class="language-julia">julia&gt; rd&quot;1m[LDOM;PDOM]&quot; + Date(2019,1,31)
2019-02-28
julia&gt; rd&quot;1m[FDONM;PDOM]&quot; + Date(2019,1,31)
2019-03-01
julia&gt; rd&quot;1m[NDONM;PDOM]&quot; + Date(2019,1,31)
2019-03-03
julia&gt; rd&quot;1m[NDONM;PDOMEOM]&quot; + Date(2019,1,31)
2019-02-28</code></pre><p>We also provide default values for the conventions, with <em>Last Day Of Month</em> for invalid days and <em>Preserve Day Of Month</em> for our monthly increment.</p><pre><code class="language-julia">julia&gt; rd&quot;1m&quot; == rd&quot;1m[LDOM;PDOM]&quot;
true</code></pre><h2 id="Years"><a class="docs-heading-anchor" href="#Years">Years</a><a id="Years-1"></a><a class="docs-heading-anchor-permalink" href="#Years" title="Permalink"></a></h2><p>Adding years is generally simple, except when we have to deal with February and leap years. As such, we use the same conventions as for months.</p><pre><code class="language-julia">julia&gt; rd&quot;1y[LDOM;PDOM]&quot; + Date(2019,2,28)
2020-02-28
julia&gt; rd&quot;1y[LDOM;PDOMEOM]&quot; + Date(2019,2,28)
2020-02-29
julia&gt; rd&quot;1y[LDOM;PDOM]&quot; + Date(2020,2,29)
2021-02-28
julia&gt; rd&quot;1y[FDOM;PDOM]&quot; + Date(2020,2,29)
2021-03-01</code></pre><p>Similar to months we also provide default values for the conventions, with <em>Last Day Of Month</em> for invalid days and <em>Preserve Day Of Month</em> for our monthly increment.</p><pre><code class="language-julia">julia&gt; rd&quot;1y&quot; == rd&quot;1y[LDOM;PDOM]&quot;
true</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../months_and_years/">Months and Years »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.3 on <span class="colophon-date" title="Monday 12 July 2021 21:28">Monday 12 July 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
